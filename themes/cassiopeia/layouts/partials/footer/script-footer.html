<!-- JavaScript and dependencies -->

{{ $bootstrap := resources.Get "js/bootstrap/bootstrap.bundle.js" }}
{{ $js := resources.Get "js/main.js" }}
{{ $color := resources.Get "js/color-mode.js" }}

{{ if eq (hugo.Environment) "development" -}}
    {{ if .Site.Params.options.bootStrapJs -}}
    <script src="{{ $bootstrap.RelPermalink }}" defer></script>
    {{ end -}}
    {{ with $color }}
    <script src="{{ .RelPermalink }}" defer></script>
    {{ end -}}
    {{ with $js }}
    <script src="{{ .RelPermalink }}" defer></script>
    {{ end -}}
{{ else -}}
    {{ if .Site.Params.options.bootStrapJs -}}
        {{ $bootstrap := $bootstrap | minify -}}
        <script src="{{ $bootstrap.RelPermalink }}" integrity="{{ $bootstrap.Data.Integrity }}" crossorigin="anonymous"
        defer></script>
    {{ end -}}
    {{ with $color }}
        {{ $color := . | minify -}}
        <script src="{{ $color.RelPermalink }}" integrity="{{ $color.Data.Integrity }}" crossorigin="anonymous" defer></script>
    {{ end -}}
    {{ with $js }}
        {{ $js := . | minify -}}
        <script src="{{ $js.RelPermalink }}" integrity="{{ $js.Data.Integrity }}" crossorigin="anonymous" defer></script>
    {{ end }}
{{ end }}